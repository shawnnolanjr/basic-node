<%- include header.ejs %>
<div class="col-md-6 col-md-offset-3">
    <% if(error) { %>
    <div class="alert alert-danger" role="alert">
        <%- error %>
    </div>
    <% } %>
    <% if(success) { %>
    <div class="alert alert-success" role="alert">
        <%- success %>
    </div>
    <% } %>

    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#register">Register</a></li>
        <li><a data-toggle="tab" href="#login">Login</a></li>
    </ul>

    <div class="tab-content">
        <div id="register" class="tab-pane fade in active">
            <%- include partials/register.ejs %>
        </div>
        <div id="login" class="tab-pane fade">
            <%- include partials/login.ejs %>
        </div>
    </div>
</div>
<%- include footer.ejs %>
<script type="application/javascript">
	(function($){
		let $loginForm = $('form#loginForm');
		let $registerForm = $('form#registerForm');
		let $btn = $('.btn');
        $btn.on('click', function(e){
			e.preventDefault();
			if(this.id === 'loginBtn') {
				let postLogin = $.post('/api/v1/login', $loginForm.serialize());
				postLogin
					.done(function(data) {
						console.log('done', data);
						return data;
					})
					.fail(function(err) {
						console.log('fail', err);
						return err;
					});
            }
	        if(this.id === 'registerBtn') {
		        let postLogin = $.post('/api/v1/register', $registerForm.serialize());
		        postLogin
			        .done(function(data) {
				        console.log('done', data);
				        return data;
			        })
			        .fail(function(err) {
				        console.log('fail', err);
				        return err;
			        });
	        }
        });
	})(jQuery);
</script>